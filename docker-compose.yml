version: "3" # 파일 규격 버전
services: # 이 항목 밑에 실행하려는 컨테이너 들을 정의
  database:
    image: mysql:8.0.28 # 사용할 이미지
    container_name: mysql # 컨테이너 이름 설정
    restart: always
    environment: # -e 옵션
      MYSQL_DATABASE: artsider  # artsider란 이름의 DB 생성
      MYSQL_ROOT_PASSWORD: bigdata@202  # root 패스워드 설정 옵션
      TZ: Asia/Seoul
    command: # 명령어 실행
      - --character-set-server=utf8mb4
      - --collation-server=utf8mb4_unicode_ci
    ports:
      - 3306:3306 # 접근 포트 설정 (컨테이너 외부:컨테이너 내부)
      
  spring:
    container_name: backSpring
    build: 
      context: ./backend/backSpring
      dockerfile: Dockerfile
    depends_on:
      - database
    ports:
      - 8080:8080

  vue:
    container_name: front
    build:
      context: ./frontend
      dockerfile: Dockerfile
    ports:
      - 80:80
      - 443:443
    depends_on:
      - database